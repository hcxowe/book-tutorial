## 理解Ajax性能

> 过早的优化是万恶之源 --- Douglas Crockford

忘记那些无不足道的性能提升，把重点放在对程序整体开销影响最大的那部分

浏览器通常在运行JS上花费的时间较少，绝大部分时间消耗在DOM上

为质量编程，简洁易读且条理分明的代码更易于正确理解、维护和优化

## 创建快速相应的Web应用

用户直接操作UI中对象的感觉极限时间: 0.1s

用户随意地在计算机指令控件进行操作而无需过度等待的感觉极限时间: 1s

用户专注于任务的极限时间: 10s

JS执行时间超过0.1s --- 不够平滑快捷

JS执行时间超过1s --- 缓慢
 
JS执行时间超过10s --- 差评了

**使用delete从内存中移除不再需要的JS对象**

**从网页的DOM树上移除不再是必需的节点**

## 拆分初始化负载

将初始化页面所必须的脚本从所有脚本中拆分出来，优先加载，依赖未加载脚本的标识符则设置桩函数，剩余的脚本按需加载

## 无阻塞加载脚本

现代浏览器都可以并行下载脚本与其他资源

### 避免脚本下载阻塞的方法

#### XHR & eval

XHR请求脚本文件，通过eval执行js内容

#### XHR & 注入

XHR请求脚本文件，通过创建`<script>`将脚本内容赋值到脚本的内容，并动态插入到DOM中

#### Script in iframe

iframe与其他资源是并行下载的

#### Script DOM Element

创建`<script>`,设置src的值为指定的脚本，并将标签插入到DOM中，这里脚本可以跨域

#### Scirpt defer

给脚本标签设置defer标识脚本并行下载， 延迟执行

aync标识脚本并行下载，下载完成执行

#### document.write 写入脚本标签



## 整合异步脚本



## 布置行内脚本


## 编写高效的JS

- 执行上下文
- 作用域链
- 变量对象
- [scope]
- 活动对象

JS代码在执行时，会首先创建一个全局作用域，然后每个函数都会创建一个函数作用域，这样就会形成一个作用域链

当函数被创建时，会将此时的作用域链赋值给函数的[Scope]内部属性   
当函数被执行时，会创建一个活动对象包括this，arguments，及函数的局部变量，并添加到[Scope]顶部

**局部变量是JS中读写最快的标识符，标识符越深读写越慢**

