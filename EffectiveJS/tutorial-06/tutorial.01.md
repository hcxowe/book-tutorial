## 库和API设计

### 保持一致的约定

- 在变量命名和函数签名中使用一致的约定
- 不要偏离用户在他们的开发平台中很可能约到的约定
- 遵从与一般约定

### 将undefined看做 没有值

- 未赋值的变量初始化值为undefined
- 访问对象中不存在的属性
- 函数结尾使用未带参数的return语句
- 未给函数参数提供实参则该参数为undefined
- 避免使用undefined表示任何非特定值
- 使用描述性的字符串或者命名布尔属性的对象，不要使用undefined和null来代表特定应用标示
- 提供参数默认值应带采用测试undefined的方式

### 接受关键字参数的选项对象

- 使用选项对象使得API更具可读性，更容易记忆
- 所有通过选项对象提供的参数应当被视为可选
- 使用extend函数抽象出从选项对象中提取值的逻辑

### 避免不必要的状态

- 无状态的API提供的函数或者方法的行为只取决于输入，而与程序的状态改变无关
- 尽可能的使用无状态的API
- 如果API有状态，标示出每个操作与哪些状态有关联

### 使用结构类型设计灵活的接口

- 使用结构类型（鸭子类型）来设计灵活的对象接口
- 结构接口更灵活、更轻便，应该避免使用继承
- 针对单元测试、使用mock对象即接口的替代实现来提供可复验的行为

### 区分数组对象和类数组对象

- 绝不重载与其他类型有重叠的结构类型
- 当重载一个结构类型与其他类型时，先测试其他类型
- 当重载与其他对象类型时，接受真数组而不是类数组对象
- 文档标注你的API是否接受真数组或者类数组对象
- 使用ES5提供的Array.isArray方法测试真数组

### 避免过度的强制转换

- 避免强制转换和重载的混用
- 考虑防御性的监视非预期的输入

### 支持方法链

- 使用方法链来连接无状态的操作
- 通过在无状态的方法返回新对象来支持方法链
- 通过在有状态的方法返回this来支持方法链